# プロジェクトB: 小規模多機能利用調整システム

**バージョン**: 1.0.0 (Phase 1)  
**作成日**: 2025年11月23日

---

## 📖 概要

小規模多機能型居宅介護の**月別利用予定表を管理**し、**利用予定調整・新規利用者獲得に向けたリソース配分や空き状況の示唆**といった業務上の思考を支援するシステムです。

### 主な機能

- **通いサービス管理**: 前半・後半の定員管理（各15人）
- **泊まりサービス管理**: 居室軸での予約管理（9室）
- **訪問サービス管理**: 時間帯別のスケジュール管理
- **定員チェック**: リアルタイムの定員超過警告
- **空き状況可視化**: 月間・週間の空き状況表示

---

## 🎯 プロジェクトの目的

1. **調整業務の効率化**: 3サービス（通い・泊まり・訪問）の一元管理
2. **稼働率の向上**: 空き状況の可視化による定員の有効活用
3. **新規利用者獲得**: 空き枠の提示による営業支援
4. **属人性の軽減**: 標準化された予定管理

---

## 🛠️ 技術スタック

### Phase 1（現在）

- **フロントエンド**: HTML5, CSS3, JavaScript (ES2022+)
- **データ管理**: localStorage
- **モジュールシステム**: ES Modules
- **開発環境**: VS Code + Live Server
- **対応ブラウザ**: Chrome, Edge, Firefox, Safari（モダンブラウザ）

### Phase 2以降（予定）

- サーバー連携（REST API）
- ビルドツール（Vite）
- テストフレームワーク（Vitest）

---

## 📁 プロジェクト構成

```
project-b/
├── README.md              # このファイル
├── .gitignore             # Git除外設定
├── docs/                  # 設計ドキュメント（23文書）
├── src/                   # ソースコード
│   ├── index.html         # メインHTML
│   ├── css/               # スタイルシート
│   ├── js/                # JavaScript
│   │   ├── main.js        # エントリーポイント
│   │   ├── common/        # 共通モジュール
│   │   ├── kayoi/         # 通いセクション
│   │   ├── tomari/        # 泊まりセクション
│   │   └── houmon/        # 訪問セクション
│   └── assets/            # 静的リソース
└── tests/                 # テスト
```

---

## 🚀 セットアップ

### 1. リポジトリのクローン

```bash
git clone [repository-url]
cd project-b
```

### 2. VS Codeで開く

```bash
code .
```

### 3. Live Serverで起動

1. VS Codeで `src/index.html` を開く
2. 右クリック → "Open with Live Server"
3. ブラウザで `http://localhost:5500/src/` が開く

---

## 📚 ドキュメント

詳細な設計ドキュメントは `docs/` フォルダを参照してください。

### ドキュメント構成

- **L0層（業務知識）**: 小規模多機能の制度・定員・制約（6文書）
- **L1層（基礎）**: プロジェクト概要・データ構造・技術仕様（4文書）
- **L2層（セクション別）**: 通い・泊まり・訪問の詳細設計（9文書）
- **L3層（統合）**: UI統合・入出力・調整支援（4文書）

**開始点**: `docs/INDEX_ドキュメント構成.md`

---

## 🎨 設計原則

### 1. セクション独立性

3つのセクション（通い・泊まり・訪問）は完全に独立し、イベント駆動で通信します。

### 2. 日付軸思考

「この日は誰が利用するか」を中心に設計されています。

### 3. 居室管理重視

泊まりセクションは居室を主軸とした設計です。

### 4. 拡張性

新しいセクションの追加やPhase 2への移行を考慮した設計です。

---

## 🧪 テスト

### Phase 1（手動テスト）

```bash
# tests/manual/ にチェックリストあり
tests/manual/kayoi_test.md    # 通いセクションのテスト
tests/manual/tomari_test.md   # 泊まりセクションのテスト
tests/manual/houmon_test.md   # 訪問セクションのテスト
```

### Phase 2以降（自動テスト）

```bash
npm test
```

---

## 📦 データ構造

### マスタデータ

- **利用者（User）**: 最大29人
- **職員（Staff）**: 訪問サービス担当者
- **居室（Room）**: 9室

### 予定データ

- **通い予定（KayoiSchedule）**: 前半・後半の利用
- **泊まり予約（TomariReservation）**: 居室・期間管理
- **訪問予定（HoumonSchedule）**: 時間帯・回数管理

---

## 🔧 開発ガイド

### ディレクトリ構造の原則

```javascript
// ✅ 推奨：イベント駆動
document.dispatchEvent(new CustomEvent('kayoi:scheduleAdded', {
  detail: { userId, date, section }
}));

// ❌ 避ける：セクション間の直接依存
import { TomariSection } from '../tomari/TomariSection.js';
```

### 命名規則

- **クラス**: PascalCase（例: `KayoiSchedule`）
- **ファイル**: PascalCase（例: `KayoiSchedule.js`）
- **関数**: camelCase（例: `checkCapacity`）
- **定数**: UPPER_SNAKE_CASE（例: `MAX_CAPACITY`）

---

## 🐛 既知の問題

現在なし（Phase 1実装開始）

---

## 📅 ロードマップ

### Phase 1（現在）- ブラウザ完結型

- [x] ドキュメント作成（23文書）
- [ ] 共通基盤実装
- [ ] 通いセクション実装
- [ ] 泊まりセクション実装
- [ ] 訪問セクション実装
- [ ] CSV入出力

### Phase 2 - サーバー連携

- [ ] REST API実装
- [ ] データベース連携
- [ ] ユーザー認証
- [ ] Excel入出力

### Phase 3 - AI機能

- [ ] 空き枠推奨
- [ ] 最適化提案
- [ ] 予測機能

---

## 🤝 貢献

このプロジェクトは現在開発中です。

---

## 📝 ライセンス

[ライセンスを指定してください]

---

## 📞 お問い合わせ

[連絡先を指定してください]

---

**最終更新**: 2025年11月23日  
**バージョン**: 1.0.0 (Phase 1)
