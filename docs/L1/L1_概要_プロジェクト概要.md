# L1_概要_プロジェクト概要

**作成日**: 2025年11月22日  
**カテゴリ**: 第1層 - 基礎  
**バージョン**: 1.1

---

## 📖 このドキュメントについて

このドキュメントは、**プロジェクトBの全体像**、特に**プロジェクトの目的、スコープ、基本コンセプト、段階的実装戦略**をまとめたものです。

### 対象読者

- プロジェクトBの開発メンバー全員
- 設計担当者（Claude）
- 実装担当者（GitHub Copilot）
- プロジェクトの全体像を理解したい方

### 読了後に理解できること

- プロジェクトBの目的と背景
- 何をやるのか、何をやらないのか（スコープ）
- 「制約パズル」としての基本コンセプト
- 3つのセクションの独立性
- 段階的実装戦略（Phase 1-3）
- 成功の定義

---

## 1. プロジェクトの背景と目的

### 1.1 業務課題（L0層の要約）

小規模多機能型居宅介護の利用調整業務には、以下の課題があります：

#### 課題1：属人性の高さ

```
調整業務は「ベテランの頭の中」に依存
  ↓
・新人が育たない
・ベテランが異動すると業務が回らなくなる
・調整の根拠が記録に残らない
```

**参照**: L0_業務_調整業務の制約.md

---

#### 課題2：制約の複雑さ

```
同時に考慮すべき制約：
├─ 登録定員29人
├─ 通い定員15人（前半・後半別）
├─ 泊まり定員9人
├─ 夜勤1人体制のリスク
├─ 職員配置基準
├─ 利用者の希望（曜日、時間帯）
├─ 送迎ルート
├─ 医療的ケアの対応可否
└─ 突発的な変更（受診、入院、体調不良等）
```

**参照**: 
- L0_業務_定員の法的枠組み.md
- L0_業務_居室管理の重要性.md

---

#### 課題3：空き状況の把握困難

```
問い合わせ：「今週末、泊まれますか？」
  ↓
調整担当者：
1. 紙の予定表を見る
2. 該当日の宿泊者を数える
3. 夜勤負担を考慮する
  ↓
回答まで5〜10分
```

**参照**: L0_業務_新規利用者獲得.md

---

#### 課題4：稼働率の最適化困難

```
現実：
・登録率が低い（40%未満が44.4%）
・泊まりが特定日だけ埋まる
・通いの前半・後半で偏りがある
  ↓
・「空きがない」と断ってしまう
・実際には平日は空いている
・稼働率が向上しない
```

**参照**: L0_業務_新規利用者獲得.md

---

### 1.2 現状の問題点

#### 紙の月別予定表

```
メリット：
✓ 柔軟性が高い
✓ 慣れ親しんだ方法

デメリット：
× 定員の自動カウントができない
× 空き状況が一目でわからない
× 変更履歴が残らない
× 集計・分析ができない
× 共有が困難（複写が必要）
```

---

#### Excelでの管理

```
メリット：
✓ 集計・計算ができる
✓ 印刷がきれい

デメリット：
× 複雑な数式が必要
× セル結合等で扱いにくい
× 定員チェックのロジックが複雑
× バージョン管理が困難
× 複数人での同時編集が難しい
```

---

#### 介護ソフト（CAREKARTE）

```
メリット：
✓ 記録から請求まで一気通貫
✓ 法令遵守

デメリット：
× 予定調整の段階では使いにくい
× 月全体の俯瞰が難しい
× 空き状況がすぐわからない
× 調整支援機能がない
```

**参照**: L0_業務_介護ソフトとの関係.md

---

### 1.3 プロジェクトの目的

**プロジェクトBは、利用調整業務を支援し、以下を実現する：**

#### 目的1：属人性の軽減

```
ベテランの「暗黙知」を可視化
  ├─ 定員の自動カウント
  ├─ 制約の可視化
  ├─ リスクの警告
  └─ 調整の履歴記録

→ 新人でも調整できるようになる
```

---

#### 目的2：空き状況の即座の把握

```
「今日、泊まれますか？」
  ↓
システムが即答
  ├─ 今日の宿泊者数：7/9人
  ├─ あと2人可能
  └─ 夜勤負担度：★★★☆☆

→ 問い合わせに即答できる
```

---

#### 目的3：稼働率の向上

```
月間の空き状況を俯瞰
  ├─ 週末は埋まりやすい
  ├─ 平日は空きが多い
  └─ 特定日のみ埋まる

→ 「平日なら受け入れ可能」と具体的に提案
→ 登録率・稼働率が向上
```

---

#### 目的4：調整業務の「快感」化

```
従来：ストレスの塊
  ├─ 制約が多すぎる
  ├─ 計算が面倒
  └─ ミスが怖い

プロジェクトB：制約パズルとしての快感
  ├─ 制約が一目でわかる
  ├─ 即フィードバック
  └─ 試行錯誤が楽しい

→ 「調整業務が気持ちいい」
```

**詳細は 3.1 基本コンセプト を参照**

---

## 2. プロジェクトのスコープ

### 2.1 対象範囲（やること）

#### Phase 1（3セクション完成版・ブラウザ完結型）
```
✓ 通いセクション
  ├─ 月別予定表の表示
  ├─ 予定の入力・編集・削除
  ├─ 定員チェック（前半・後半別）
  ├─ 制約の可視化（色分け）
  └─ CSVインポート・エクスポート

✓ 泊まりセクション
  ├─ 居室管理
  ├─ 期間管理（入→○→退）
  ├─ 定員チェック（9人/日）
  └─ 制約の可視化

✓ 訪問セクション
  ├─ 時間帯別管理
  ├─ 回数カウント
  └─ 訪問スケジュール可視化

✓ ブラウザ完結型
  ├─ HTML/CSS/JavaScript
  ├─ localStorage での永続化
  └─ サーバー不要
```

---

#### Phase 2（サーバー連携版）
```
✓ バックエンドAPI
  ├─ クラウド保存
  ├─ 複数端末での同期
  └─ バックアップ機能
```

---

#### Phase 3（調整支援機能）
```
✓ 最適化スコアの表示
  ├─ 定員充足率
  ├─ 稼働率
  └─ 定員オーバー回数

✓ 成長の可視化
  ├─ スコア推移グラフ
  └─ 前月比の改善率

✓ 調整支援機能
  ├─ 空き状況分析
  ├─ AI提案（検討）
  └─ 営業支援（チラシ生成等）
```

---

### 2.2 対象外（やらないこと）

#### Phase 1では対象外

```
× サーバー連携（Phase 2で実装）
× 最適化スコア（Phase 3で実装）
× AI提案（Phase 3で実装）
× 成長の可視化（Phase 3で実装）
```

---

#### プロジェクト全体で対象外

```
× 記録・請求機能
  → CAREKARTEの役割

× 利用者マスタの完全管理
  → CAREKARTEから取得

× 職員のシフト管理
  → 別システムの役割

× ケアプラン作成
  → ケアマネの業務

× 介護記録
  → CAREKARTEの役割
```

**理由**: CAREKARTEとの役割分担
- **プロジェクトB**: 予定調整に特化
- **CAREKARTE**: 記録・請求に特化

**参照**: L0_業務_介護ソフトとの関係.md

---

### 2.3 将来的な拡張可能性

```
Phase 4以降（検討中）:
├─ CAREKARTE API連携（双方向）
├─ スマートフォンアプリ
├─ 音声入力
├─ 多言語対応
└─ 他施設との比較・ベンチマーク
```

**注意**: Phase 3まで完成してから検討する

---

## 3. システムの全体像

### 3.1 基本コンセプト：調整業務は「制約パズル」

#### 業務の本質

小規模多機能型居宅介護の利用調整は、本質的に**制約パズル**である。

**制約の例**:
```
├─ 登録定員29人
├─ 通い定員15人（前半・後半別）
├─ 泊まり定員9人
├─ 夜勤1人体制（安全性の考慮）
├─ 職員配置基準
├─ 利用者の希望（曜日、時間帯）
├─ 送迎ルート
└─ 医療的ケアの対応可否
```

これらの制約の中で、**利用者のニーズを最大限満たす配置を探す**のが調整担当者の仕事。

---

#### パズルとしての快感

優れたパズルゲームの要素：

| 要素 | 小規模多機能の調整業務 | プロジェクトBでの実装 |
|------|---------------------|---------------------|
| **明確な制約** | 定員、職員配置基準等 | 制約を可視化（色分け） |
| **即フィードバック** | 置いたらすぐ結果が分かる | セル入力で即座に定員カウント更新 |
| **試行錯誤** | やり直しが簡単 | Ctrl+Z で元に戻す、ドラッグ移動 |
| **最適化の喜び** | より良い解を見つける快感 | 定員充足率、稼働率の向上（Phase 2） |
| **成長の実感** | 上達が見える | スコア推移の表示（Phase 2） |

**つまり**:  
もともとの業務構造自体がゲーム的（Puzzle型）なので、  
**プロジェクトBは、この「パズルとしての快感」を引き出す設計を目指す。**

---

#### 設計方針

```
❌ ゲームっぽいUI（派手な演出、ポイント表示等）
✅ ゲーム的な体験（即フィードバック、試行錯誤の容易さ）
```

**重要な注意**: 
- **見た目は業務ツール** - シンプルで洗練されたデザイン
- **体験だけがゲーム的** - 制約パズルの快感を引き出す
- アニメーションは控えめ（0.2秒程度のフェードのみ）
- 効果音・キャラクター・バッジ等は不要

**具体的には**:

| Phase | 実装する「パズル的要素」 |
|-------|----------------------|
| **Phase 1** | 制約の可視化（色分け）、即フィードバック、試行錯誤の容易さ |
| **Phase 2** | 最適化スコア、成長の可視化 |
| **Phase 3** | AI提案、理由の説明 |

---

#### 月別予定表が中心

```
CSV/Excelは入出力手段に過ぎない

月別予定表こそが業務の中心
  ↓
「この日は誰が来るか？」に即答できることが最重要
```

**設計原則**: 
- 月別予定表の実務を忠実に再現
- CSV/Excelインポートは補助機能
- 画面上での編集が主

---

### 3.2 3つのセクション

プロジェクトBは、小規模多機能の3つのサービスに対応する**3つのセクション**で構成されます。

```
┌────────────────────────────────┐
│   プロジェクトB                │
├────────────────────────────────┤
│                                │
│  ┌──────────────────────┐     │
│  │ 通いセクション        │     │
│  │ (Phase 1)            │     │
│  └──────────────────────┘     │
│                                │
│  ┌──────────────────────┐     │
│  │ 泊まりセクション      │     │
│  │ (Phase 3)            │     │
│  └──────────────────────┘     │
│                                │
│  ┌──────────────────────┐     │
│  │ 訪問セクション        │     │
│  │ (Phase 3)            │     │
│  └──────────────────────┘     │
│                                │
└────────────────────────────────┘
```

---

### 3.3 アーキテクチャの概要

#### Phase 1：ブラウザ完結型

```
┌─────────────────────────┐
│ ブラウザ                 │
├─────────────────────────┤
│ HTML/CSS/JavaScript     │
│ ├─ 通いセクション       │
│ ├─ 共通UI               │
│ └─ データ管理           │
├─────────────────────────┤
│ localStorage            │
│ （データ永続化）         │
└─────────────────────────┘

メリット：
✓ サーバー不要
✓ オフラインで動作
✓ 導入が簡単

デメリット：
× 複数端末で共有できない
× バックアップが手動
```

---

#### Phase 2：サーバー連携版

```
┌─────────────────────────┐
│ ブラウザ                 │
├─────────────────────────┤
│ HTML/CSS/JavaScript     │
└─────────────────────────┘
         ↕ API
┌─────────────────────────┐
│ バックエンドサーバー     │
├─────────────────────────┤
│ Node.js/Express         │
│ ├─ REST API            │
│ └─ データベース         │
└─────────────────────────┘

メリット：
✓ 複数端末で同期
✓ 自動バックアップ
✓ スコアリング機能

デメリット：
× サーバー費用
× ネットワーク必須
```

**詳細**: L1_技術_技術仕様.md を参照

---

## 4. セクション独立性の原則

### 4.1 なぜセクションを独立させるのか

**セクション独立性**は、プロジェクトBの最も重要な設計原則の一つです。

#### 理由1：並行開発の実現

```
開発者A：通いセクション担当
開発者B：泊まりセクション担当
開発者C：訪問セクション担当

↓

同時に開発できる
= 開発期間の短縮
```

---

#### 理由2：保守性の向上

```
通いセクションの修正
  ↓
泊まりセクションに影響しない
  ↓
安心して変更できる
```

---

#### 理由3：テストの容易性

```
通いセクション単体でテスト
  ↓
他のセクションが完成していなくてもOK
  ↓
テスト範囲が明確
```

---

#### 理由4：段階的リリースの可能性

```
Phase 1：通いセクションのみリリース
  ↓
実運用で検証
  ↓
Phase 3：泊まり・訪問を追加
```

---

### 4.2 独立性の定義

**3つの独立性**:

#### データ構造が独立

```
通いセクション：
  ├─ KayoiSchedule クラス
  ├─ userId, date, section (前半/後半)
  └─ 専用のバリデーションルール

泊まりセクション：
  ├─ TomariReservation クラス
  ├─ userId, startDate, endDate, roomId
  └─ 専用のバリデーションルール

→ 相互参照しない
```

---

#### UI表示が独立

```
通いセクション：
  ├─ #kayoi-section の DOM領域
  ├─ 専用のCSS
  └─ 専用のイベントハンドラ

泊まりセクション：
  ├─ #tomari-section の DOM領域
  ├─ 専用のCSS
  └─ 専用のイベントハンドラ

→ DOM領域を共有しない
```

---

#### ビジネスロジックが独立

```
通いセクション：
  ├─ 定員チェック（前半・後半別）
  ├─ 前半・後半の判定
  └─ 通い専用のバリデーション

泊まりセクション：
  ├─ 居室割当ロジック
  ├─ 期間重複チェック
  └─ 泊まり専用のバリデーション

→ ロジックを共有しない
```

---

### 4.3 セクション間の通信

**原則**: 直接依存を避け、イベント駆動で通信する

#### ❌ 悪い例：直接依存

```javascript
// 通いセクションが泊まりセクションに直接アクセス
class KayoiSection {
  checkConflict(date) {
    return tomariSection.hasReservation(date); // ❌
  }
}
```

**問題**:
- 泊まりセクションが未実装だとエラー
- 泊まりセクションの変更が通いに影響
- テストが困難

---

#### ✅ 良い例：イベント駆動

```javascript
// 通いセクションは自分のデータだけ管理
class KayoiSection {
  addSchedule(date, userId) {
    // 自分のデータを更新
    this.schedules.push({ date, userId });
    
    // イベントで通知（他セクションは任意で受け取る）
    this.dispatchEvent(new CustomEvent('scheduleAdded', {
      detail: { date, userId }
    }));
  }
}

// 泊まりセクションは必要なら受け取る
tomariSection.addEventListener('scheduleAdded', (e) => {
  // 必要なら何かする（オプション）
});
```

**メリット**:
- 泊まりセクションが未実装でもエラーにならない
- セクション間が疎結合
- テストが容易

---

### 4.4 共通処理の配置

セクション間で共通の処理は、**共通ユーティリティ**として配置します。

#### 配置ルール

```
共通処理の種類：
├─ DateUtils（日付処理）
├─ ValidationUtils（共通バリデーション）
├─ CommonUI（共通UI部品）
└─ StorageUtils（データ永続化）

配置場所：
/src/utils/
  ├─ DateUtils.js
  ├─ ValidationUtils.js
  ├─ CommonUI.js
  └─ StorageUtils.js
```

---

#### 例：DateUtils

```javascript
// 共通ユーティリティ
class DateUtils {
  // 文字列 → Date
  static parseDate(dateStr) {
    return new Date(dateStr);
  }
  
  // Date → 文字列（ISO形式）
  static formatDate(date) {
    return date.toISOString().split('T')[0];
  }
  
  // 曜日取得
  static getDayOfWeek(dateStr) {
    const date = new Date(dateStr);
    return date.getDay(); // 0-6
  }
}

// 通いセクションで使用
class KayoiSection {
  isWeekend(date) {
    const dow = DateUtils.getDayOfWeek(date);
    return dow === 0 || dow === 6;
  }
}

// 泊まりセクションでも使用
class TomariSection {
  isWeekend(date) {
    const dow = DateUtils.getDayOfWeek(date);
    return dow === 0 || dow === 6;
  }
}
```

---

### 4.5 実装時の注意点

**Copilot向けの注意事項**（詳細は L1_技術_実装制約.md を参照）:

#### DON'T：やってはいけないこと

```javascript
// ❌ 他セクションのデータに直接アクセス
const tomariData = tomariSection.getData(date);

// ❌ グローバル変数で状態を共有
let globalSelectedDate = null;

// ❌ DOM領域を共有
document.querySelector('#kayoi-section .cell'); // 通い
document.querySelector('#kayoi-section .cell'); // 泊まりで使用 ← ❌
```

---

#### DO：やるべきこと

```javascript
// ✅ 自分のデータだけアクセス
const kayoiData = this.getData(date);

// ✅ セクション内のプライベート変数
class KayoiSection {
  #selectedDate = null;
}

// ✅ 専用のDOM領域
document.querySelector('#kayoi-section .cell'); // 通い
document.querySelector('#tomari-section .cell'); // 泊まり
```

---

## 5. 3つのセクションの概要

### 5.1 通いセクション

**目的**: 日中の通所サービスの予定管理

**管理単位**: 利用者 × 日付 × 時間帯（前半/後半）

**定員**: 15人/日（前半・後半それぞれ）

**主な機能**:
- 月別予定表（横軸:日付、縦軸:利用者）
- 前半・後半の区別（○◓◒の記号）
- 定員チェック（前半・後半別）
- 制約の可視化（色分け）

**Phase**: Phase 1

**詳細**: L2_通い_（3文書）参照

---

### 5.2 泊まりセクション

**目的**: 宿泊サービスの予定管理

**管理単位**: 居室 × 期間（開始日〜終了日）

**定員**: 9人/日

**主な機能**:
- 居室軸の月別予定表（横軸:日付、縦軸:居室）
- 期間管理（入→○→退の記号）
- 居室割当
- 夜勤負担度の可視化

**Phase**: Phase 1

**詳細**: L2_泊まり_（3文書）参照

---

### 5.3 訪問セクション

**目的**: 訪問サービスの予定管理

**管理単位**: 利用者 × 日付 × 時間帯

**定員**: なし

**主な機能**:
- 時間帯別の回数表示（朝・昼・夕・夜）
- 回数カウント
- 訪問スケジュールの可視化

**Phase**: Phase 1

**詳細**: L2_訪問_（3文書）参照

---

## 6. 段階的実装戦略

### 6.1 Phase 1：3セクション完成版（ブラウザ完結型）

#### 目標
**通い・泊まり・訪問の3セクションすべてが動作する、実用的なシステムを構築**

---

#### 技術スタック
- HTML/CSS/JavaScript（バニラJS）
- localStorage（データ永続化）
- サーバー不要

---

#### 機能
```
✓ 通いセクション
  ├─ 月別予定表の表示
  ├─ 予定の入力・編集・削除
  ├─ 前半・後半の区別（○◓◒）
  ├─ 定員チェック（前半・後半別）
  ├─ 制約の可視化（色分け）
  └─ 即フィードバック

✓ 泊まりセクション
  ├─ 居室軸の月別予定表
  ├─ 期間管理（入→○→退）
  ├─ 居室割当
  ├─ 定員チェック（9人/日）
  └─ 制約の可視化

✓ 訪問セクション
  ├─ 時間帯別の回数表示
  ├─ 回数カウント
  ├─ 訪問スケジュール可視化
  └─ 時間帯別管理

✓ CSV機能
  ├─ 算定基礎CSVインポート
  └─ 予定表CSVエクスポート

✓ UI/UX
  ├─ シンプルで見やすいデザイン
  ├─ 0.2秒のフェードアニメーション
  └─ Ctrl+Z（元に戻す）
```

---

#### パズル要素の実装（Phase 1）

```
✅ 制約の可視化
  ├─ 定員超過: 赤い背景色（rgba(255, 0, 0, 0.1)）
  ├─ 定員ギリギリ: 黄色い背景色（rgba(255, 255, 0, 0.1)）
  └─ 余裕あり: 通常表示

✅ 即フィードバック
  ├─ セルに入力すると即座に定員カウント更新
  └─ 色分けも即座に変化（0.2秒フェード）

✅ 試行錯誤の容易さ
  ├─ Ctrl+Z で元に戻す
  └─ ドラッグで移動（代替手段も提供）
```

**まだやらないこと**:
```
× サーバー連携（Phase 2で実装）
× スコアリング（Phase 3で実装）
× AI提案（Phase 3で実装）
× 成長の可視化（Phase 3で実装）
```

---

#### 期間
**4-6ヶ月**

---

#### 成功基準
- 1事業所で実運用開始
- 3セクションすべての月別予定表が紙から置き換わる
- 調整担当者が「3セクション統合で使いやすい」と評価
- 定員チェックの自動化率100%（全セクション）

---

### 6.2 Phase 2：サーバー連携版

#### 目標
**複数デバイスでデータ共有**

---

#### 技術スタック追加
- バックエンドAPI（Node.js/Express等）
- データベース（PostgreSQL/MongoDB等）
- 認証機能

---

#### 機能追加
```
✓ サーバー連携
  ├─ クラウド保存
  ├─ 複数端末での同期
  └─ 自動バックアップ
```

**Phase 1の機能はすべて継続**

---

#### 期間
**2-3ヶ月**

---

#### 成功基準
- 複数事業所で利用開始
- 複数端末でのデータ共有が実現
- 同期の安定性・速度が実用レベル

---

### 6.3 Phase 3：調整支援機能

#### 目標
**最適化スコア表示、AI提案による調整支援**

---

#### 機能追加
```
✓ 最適化スコアの表示
  ├─ 定員充足率
  ├─ 稼働率
  ├─ 定員オーバー回数
  └─ スコアの推移グラフ

✓ 成長の可視化
  ├─ 「過去30日の最適化スコア推移」
  ├─ 「定員オーバー率の改善」
  └─ 「稼働率の向上」

✓ 調整支援機能
  ├─ 空き状況分析
  ├─ AI提案（検討）
  └─ 営業支援（チラシ生成等）
```

---

#### パズル要素の完成（Phase 3）

```
✅ 最適化スコア
  ├─ 定員充足率（登録者数 / 登録定員）
  ├─ 稼働率（実際の利用 / 定員）
  └─ 定員オーバー回数（月間）

✅ 成長の可視化
  ├─ スコアの推移グラフ
  ├─ 前月比の改善率
  └─ 施設全体の成長指標

✅ AI提案（検討）
  ├─ 「今日のベスト構成案」
  ├─ 「この変更でどうなるか？」のシミュレーション
  └─ 複数案の提示

✅ 理由の説明
  ├─ 「この配置だと泊まり定員が超過します」
  ├─ 「訪問スタッフが重複します」
  └─ 「通いスタッフが不足します」
```

**注意**: 
- スコア表示は控えめに
- ゲームっぽい演出は避ける
- 業務ツールとしての品位を保つ
- AI提案は「補助」であり「強制」ではない
- 調整担当者の判断を尊重
- 提案の理由を必ず説明

---

#### 期間
**3-4ヶ月**

---

#### 成功基準
- スコアリング機能が調整の改善に寄与
- 調整業務が「楽しい」と評価（パズル的快感）
- 稼働率・登録率の向上
- 新規利用者獲得が向上（空き状況の即答）

---

## 7. 前提条件と制約

### 7.1 業務上の前提条件

#### 前提1：小規模多機能型居宅介護の基本知識

このプロジェクトは、以下の業務知識を前提とします：

```
必読：L0層（全6文書）
├─ L0_業務_小規模多機能とは.md
├─ L0_業務_定員の法的枠組み.md
├─ L0_業務_居室管理の重要性.md
├─ L0_業務_調整業務の制約.md
├─ L0_業務_新規利用者獲得.md
└─ L0_業務_介護ソフトとの関係.md
```

**すべての設計判断は、L0層の業務知識に基づく**

---

#### 前提2：CAREKARTEとの役割分担

```
プロジェクトB：予定調整に特化
  ├─ 月別予定表の管理
  ├─ 定員チェック
  ├─ 空き状況の可視化
  └─ 調整支援

CAREKARTE：記録・請求に特化
  ├─ 日々の実施記録
  ├─ 利用票・提供票
  ├─ 請求データ生成
  └─ 国保連への請求
```

**参照**: L0_業務_介護ソフトとの関係.md

---

#### 前提3：月別予定表が業務の中心

```
現場の実務：
紙の月別予定表を見ながら調整
  ↓
プロジェクトBの設計：
月別予定表の実務を忠実に再現

CSV/Excelは入出力手段に過ぎない
```

---

### 7.2 技術的な前提条件

#### Phase 1の前提

```
✓ モダンブラウザ（Chrome, Edge, Firefox, Safari）
✓ JavaScript有効
✓ localStorage使用可能
✓ 画面解像度：1366×768以上推奨
```

---

#### Phase 2以降の前提

```
✓ インターネット接続
✓ サーバー環境（Node.js等）
✓ データベース
```

**詳細**: L1_技術_技術仕様.md を参照

---

### 7.3 制約事項

#### 制約1：法令遵守

```
必須：
├─ 登録定員29人以下
├─ 通い定員15人以下（前半・後半別）
├─ 泊まり定員9人以下
└─ その他、基準第66条、第82条に準拠
```

**参照**: L0_業務_定員の法的枠組み.md

---

#### 制約2：セクション独立性

```
必須：
├─ 各セクションのデータ構造が独立
├─ UI表示が独立
├─ ビジネスロジックが独立
└─ セクション間は直接依存しない
```

**参照**: 4. セクション独立性の原則

---

#### 制約3：段階的実装

```
必須：
Phase 1 → Phase 2 → Phase 3 の順序を守る
  ↓
通いセクションが完成してから
泊まり・訪問セクションに着手
```

---

### 7.4 設計品質の方針

このプロジェクトの設計ドキュメントは、**WHATとWHY**を明確にすることに集中し、**HOW（実装の詳細）**は実装担当に委ねます。

#### 設計で定義すること
- 業務ルールとその根拠
- データ構造と型
- 必要な動作と制約
- 状態遷移

#### 設計で定義しないこと
- 具体的なコード
- 関数名・変数名
- DOM操作の方法
- パフォーマンス最適化の詳細

**詳細**: L1_技術_実装制約.md を参照（次に作成）

---

## 8. ステークホルダー

### 8.1 主要ユーザー

#### プライマリユーザー：調整担当者

```
役割：
├─ 月別予定表の作成・更新
├─ 定員管理
├─ 新規利用者の受け入れ検討
└─ 空き状況の確認・回答

期待：
├─ 属人性の軽減
├─ 定員チェックの自動化
├─ 空き状況の即座の把握
└─ 調整業務の効率化
```

---

#### セカンダリユーザー：管理者・経営者

```
役割：
├─ 稼働率の把握
├─ 経営判断
└─ 営業戦略の立案

期待：
├─ 稼働率の可視化
├─ 登録率の向上
├─ 営業支援（空き状況チラシ等）
└─ 経営指標のダッシュボード
```

---

### 8.2 関連するシステム・サービス

#### CAREKARTE（介護ソフト）

**役割分担**: 
- **CAREKARTE**: 記録・請求
- **プロジェクトB**: 予定調整

**データ連携**: 
- **CAREKARTE → プロジェクトB**: 算定基礎CSV
- **プロジェクトB → CAREKARTE**: 画面表示（手動転記）

**2画面並行作業**:
```
┌────────────────┐  ┌────────────────┐
│プロジェクトB   │  │ CAREKARTE      │
│（参照画面）    │  │（入力画面）    │
└────────────────┘  └────────────────┘
      👁️               ⌨️
    見ながら         入力する
```

**詳細**: L0_業務_介護ソフトとの関係.md を参照

---

## 9. 成功の定義

### 9.1 Phase 1の成功基準

#### 定量的基準
```
✓ 1事業所で実運用開始
✓ 調整担当者が週5日使用
✓ 3セクションすべての予定の80%以上がシステムに入力
✓ 定員チェックの自動化率100%（全セクション）
```

---

#### 定性的基準
```
✓ 調整担当者が「紙より使いやすい」と評価
✓ 「3セクション統合で定員オーバーに気づきやすい」と評価
✓ 新人が「分かりやすい」と評価
✓ バグ・不具合が週1回未満
```

---

### 9.2 最終的な成功基準（Phase 3完了時）

#### 定量的基準
```
✓ 複数事業所（3-5箇所）で実運用
✓ 3セクションすべてが紙から置き換わる
✓ 新規利用者の問い合わせ対応時間が50%短縮
✓ 登録率が10%向上
```

---

#### 定性的基準
```
✓ 調整業務の属人性が大幅に軽減
  → 新人でも調整できる
  
✓ 空き状況の即答が可能
  → 「今週末、泊まれますか？」に即答
  
✓ 調整業務が「楽しい」と評価
  → パズル的な快感を実感
  
✓ 稼働率・登録率の向上に寄与
  → 経営改善につながる
```

---

## 10. まとめ

### 10.1 プロジェクトBの本質（再掲）

```
小規模多機能の利用調整
  ＝
制約パズル
  ↓
プロジェクトBは
「パズルとしての快感」を引き出す
  ↓
調整業務が
「ストレスの塊」から「気持ちよく最適解を探す作業」に変わる
```

---

### 10.2 3つの核心

#### 1. セクション独立性
```
通い・泊まり・訪問は独立して設計
  ↓
並行開発、保守性、テスト容易性
```

---

#### 2. 段階的実装
```
Phase 1（通いのみ）→ Phase 2（サーバー連携）→ Phase 3（3セクション統合）
  ↓
早期にフィードバック、リスク軽減
```

---

#### 3. CAREKARTEとの補完関係
```
プロジェクトB：予定調整
CAREKARTE：記録・請求
  ↓
適材適所、役割分担
```

---

### 10.3 目指すゴール

```
調整担当者：
「このシステムがないと調整できない」

管理者・経営者：
「稼働率が向上した」

新人職員：
「ベテランがいなくても調整できる」

利用者・家族：
「すぐに空き状況を教えてもらえる」
```

---

## 📚 次に読むべきドキュメント

このドキュメントを読了したら、以下のドキュメントに進んでください。

### 次のドキュメント（順番に）

1. **L1_データ_共通データ構造.md**
   - 利用者マスタ
   - 予定データの基本構造
   - 日付管理
   - セクション共通仕様

2. **L1_技術_技術仕様.md**
   - Phase 1の技術スタック
   - アーキテクチャ（クライアント完結型）
   - データ永続化（localStorage/IndexedDB）
   - 将来の拡張性

3. **L1_技術_実装制約.md**（新規作成）
   - データ型規約
   - セクション独立性の規約
   - UI/UX規約
   - エラーハンドリング規約

---

## 📅 更新履歴

| 日付 | バージョン | 変更内容 | 担当 |
|------|----------|---------|------|
| 2025-11-22 | 1.0 | 初版作成 | Claude |
| 2025-11-22 | 1.1 | Phase分けを修正（Phase 1で3セクション完成） | Claude |

---

**最終更新**: 2025年11月22日  
**次回更新予定**: Phase 1実装完了後のフィードバック反映時

---

## 💡 このドキュメントの活用方法

### 設計時
- プロジェクト全体の方針確認
- セクション設計時の指針
- 段階的実装の計画

### 実装時
- 実装優先順位の確認
- セクション独立性の遵守確認
- パズル要素の実装指針

### レビュー時
- 設計方針との整合性確認
- スコープの逸脱確認
- 成功基準の達成度確認

---

**このドキュメントを読了したら、INDEX_ドキュメント構成.md に戻り、次のドキュメントに進んでください。**