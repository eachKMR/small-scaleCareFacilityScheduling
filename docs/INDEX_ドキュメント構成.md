# INDEX：プロジェクトBドキュメント構成

**作成日**: 2025年11月21日  
**プロジェクト**: 小規模多機能利用調整システム（プロジェクトB）  
**バージョン**: 2.1  
**更新日**: 2025年12月17日

---

## 📖 このINDEXについて

このドキュメントは、プロジェクトBの**ドキュメントHUB**です。

- 全ドキュメントの構成
- タスク別のナビゲーション
- ドキュメント間の依存関係
- 責任分界マップ

### プロジェクトBの目的

小規模多機能型居宅介護の月別利用予定表を用いて、**利用予定調整・新規利用者獲得に向けたリソース配分や空き状況の示唆**、そういった業務上の思考を支援する。

---

## 🎯 あなたの役割を選んでください

このINDEXは、**設計担当（Claude）**と**実装担当（GitHub Copilot）**の両方が使用します。

### 🎨 あなたがClaude（設計担当）の場合

→ **「設計担当の方へ」セクション**から読み始めてください

### 💻 あなたがGitHub Copilot（実装担当）の場合

→ **「実装担当の方へ」セクション**から読み始めてください

---

## 🎨 設計担当（Claude）の方へ

### あなたの役割

- ユーザーと要件について話し合い、設計を担当する
- 実装担当（GitHub Copilot）に対して実装指示を出す
- 業務知識を学び、法令に基づいた設計判断を行う

---

## 📋 タスク別ナビゲーション（設計担当）

このセクションは、具体的なタスクに対して「何を読むべきか」を示します。

### タスク1: 新規参加（プロジェクト初参加）

**目的**: プロジェクトBの全体像を理解する

**必読ドキュメント（この順序で）**:

1. **INDEX_ドキュメント構成.md**（このファイル） - 5分
   - 理由: 全体構成を把握

2. **L0_業務_小規模多機能とは.md** - 5分
3. **L0_業務_定員の法的枠組み.md** - 5分
4. **L0_業務_居室管理の重要性.md** - 5分
5. **L0_業務_調整業務の制約.md** - 5分
6. **L0_業務_新規利用者獲得.md** - 5分
7. **L0_業務_介護ソフトとの関係.md** - 5分
   - 理由: 業務知識の習得（必ず順番に）

8. **L1_概要_プロジェクト概要.md** - 15分
   - 理由: システム全体像の把握

9. **L1_制約ゲーム_全体設計.md** - 20分
   - 理由: 制約ゲームの本質理解

10. **L1_設計・実装の方針.md** - 25分
    - 理由: 設計・実装の方法論

11. **CHECKLIST_設計レビュー.md** - 10分
12. **GUIDE_LLM誤解予測レビュー.md** - 10分
13. **GUIDE_引継ぎドキュメント作成ルール.md** - 10分
    - 理由: 方法論の理解

**所要時間**: 合計約2時間

---

### タスク2: 通いセクションUI実装指示書を作成する

**目的**: GitHub Copilot向けの実装指示書を作成する

**必読ドキュメント（この順序で）**:

1. **L2_通い_データ構造.md** - 15分
   - 理由: KayoiScheduleクラスの仕様
   
2. **L2_通い_UI設計.md** - 15分
   - 理由: グリッド構造、インタラクション
   - ⚠️ 重要: セクション1.1「カレンダーヘッダーはL3で定義」を確認
   
3. **L3_UI_統合UI設計.md セクション4** - 15分 ← ⚠️ 必須
   - 理由: **カレンダーヘッダーの責任分界を理解するため**
   - 読まないとどうなる: 通いグリッド内にヘッダーを含めてしまう
   
4. **L2_通い_ロジック設計.md** - 20分
   - 理由: 定員チェック、バリデーション
   
5. **L1_制約ゲーム_全体設計.md セクション3** - 10分
   - 理由: カラーグラデーションの詳細

6. **L1_設計・実装の方針.md セクション2** - 10分
   - 理由: 実装指示書の書き方

7. **GUIDE_LLM誤解予測レビュー.md** - 10分
   - 理由: LLM誤解予測の方法

**所要時間**: 合計約1時間半

**依存関係**:
- L2_通い_UI設計 → **L3_UI_統合UI設計**（カレンダーヘッダー）
- L2_通い_UI設計 → L1_制約ゲーム（カラーグラデーション）

**読まなくていいドキュメント**:
- L2_泊まり_×××（泊まりセクションの設計）
- L2_訪問_×××（訪問セクションの設計）
- L0層（業務知識は既に理解済みの前提）

---

### タスク3: 泊まりセクションUI実装指示書を作成する

**目的**: GitHub Copilot向けの実装指示書を作成する

**必読ドキュメント（この順序で）**:

1. **L2_泊まり_データ構造.md** - 15分
2. **L2_泊まり_UI設計.md** - 15分
   - ⚠️ 重要: セクション1.1「カレンダーヘッダーはL3で定義」を確認
3. **L3_UI_統合UI設計.md セクション4** - 15分 ← ⚠️ 必須
   - 理由: カレンダーヘッダーの責任分界
4. **L2_泊まり_ロジック設計.md** - 20分
5. **L1_制約ゲーム_全体設計.md セクション3** - 10分
6. **L1_設計・実装の方針.md セクション2** - 10分
7. **GUIDE_LLM誤解予測レビュー.md** - 10分

**所要時間**: 合計約1時間半

---

### タスク4: 訪問セクションUI実装指示書を作成する

**目的**: GitHub Copilot向けの実装指示書を作成する

**必読ドキュメント（この順序で）**:

1. **L2_訪問_データ構造.md** - 15分
2. **L2_訪問_UI設計.md** - 15分
   - ⚠️ 重要: セクション1.1「カレンダーヘッダーはL3で定義」を確認
3. **L3_UI_統合UI設計.md セクション4** - 15分 ← ⚠️ 必須
   - 理由: カレンダーヘッダーの責任分界
4. **L2_訪問_ロジック設計.md** - 20分
5. **L1_設計・実装の方針.md セクション2** - 10分
6. **GUIDE_LLM誤解予測レビュー.md** - 10分

**所要時間**: 合計約1時間半

---

### タスク5: 統合UI（カレンダーヘッダー）実装指示書を作成する

**目的**: 全セクション共通のカレンダーヘッダーを実装

**必読ドキュメント（この順序で）**:

1. **L3_UI_統合UI設計.md** - 30分
   - 理由: 統合UIの全体像
2. **L2_通い_UI設計.md セクション5（縦軸整列）** - 10分
3. **L2_泊まり_UI設計.md セクション5（縦軸整列）** - 10分
4. **L2_訪問_UI設計.md セクション5（縦軸整列）** - 10分
   - 理由: 各セクションとの整合性確認
5. **L1_設計・実装の方針.md セクション2** - 10分
6. **GUIDE_LLM誤解予測レビュー.md** - 10分

**所要時間**: 合計約1時間半

---

## 🔗 ドキュメント間の依存関係

このセクションは、ドキュメント間の関係性を明示します。

### L2_通い_UI設計.md

**依存先（必ず読む）**:
- → **L3_UI_統合UI設計.md** セクション4（カレンダーヘッダーの責任分界）
- → **L1_制約ゲーム_全体設計.md** セクション3（カラーグラデーション）

**責任範囲**:
- ✅ 作ること: 利用者行、スケジュールセル、定員表示
- ❌ 作らないこと: カレンダーヘッダー（統合UIの責任）

**警告**:
- カレンダーヘッダーを通いグリッド内に含めてはいけない
- 理由: セクション独立性、縦軸整列

---

### L2_泊まり_UI設計.md

**依存先（必ず読む）**:
- → **L3_UI_統合UI設計.md** セクション4（カレンダーヘッダーの責任分界）
- → **L1_制約ゲーム_全体設計.md** セクション3（カラーグラデーション）

**責任範囲**:
- ✅ 作ること: 居室行、予約セル、定員表示
- ❌ 作らないこと: カレンダーヘッダー（統合UIの責任）

**警告**:
- カレンダーヘッダーを泊まりグリッド内に含めてはいけない

---

### L2_訪問_UI設計.md

**依存先（必ず読む）**:
- → **L3_UI_統合UI設計.md** セクション4（カレンダーヘッダーの責任分界）

**責任範囲**:
- ✅ 作ること: 利用者行、訪問セル、時間帯表示
- ❌ 作らないこと: カレンダーヘッダー（統合UIの責任）

**警告**:
- カレンダーヘッダーを訪問グリッド内に含めてはいけない

---

### L3_UI_統合UI設計.md

**依存元（このドキュメントに依存）**:
- ← L2_通い_UI設計.md
- ← L2_泊まり_UI設計.md
- ← L2_訪問_UI設計.md

**責任範囲**:
- ✅ 作ること: カレンダーヘッダー、タブナビゲーション、全体レイアウト
- ❌ 作らないこと: 各セクションのデータ行（各セクションの責任）

---

## 🗺️ 責任分界マップ

このセクションは、「誰が何を作るか」を明確にします。

### カレンダーヘッダー

- **責任者**: L3_UI_統合UI設計.md
- **内容**: 日付行、曜日行
- **CSS変数**: `--date-cell-width`
- **関係セクション**: 全セクション（通い・泊まり・訪問）
- ⚠️ **注意**: 各セクションはカレンダーヘッダーを作らない

---

### 通いセクション

- **責任者**: L2_通い_UI設計.md
- **内容**: 利用者行、スケジュールセル、定員表示
- **CSS変数**: `--label-column-width`, `--date-cell-width`（縦軸整列のため）
- ⚠️ **注意**: カレンダーヘッダーは作らない（L3の責任）

**詳細な責任範囲**:
- ✅ 利用者名列（縦軸ラベル）
- ✅ スケジュールセル（○◓◒の表示）
- ✅ 定員表示（前半/15人、後半/15人）
- ✅ セルクリック時のトグル処理
- ✅ カラーグラデーション（定員表示の背景色）
- ❌ 日付ヘッダー（L3の責任）
- ❌ 月切り替えボタン（L3の責任）

---

### 泊まりセクション

- **責任者**: L2_泊まり_UI設計.md
- **内容**: 居室行、予約セル、定員表示
- **CSS変数**: `--label-column-width`, `--date-cell-width`（縦軸整列のため）
- ⚠️ **注意**: カレンダーヘッダーは作らない（L3の責任）

**詳細な責任範囲**:
- ✅ 居室名列（縦軸ラベル）
- ✅ 予約セル（入・○・退の表示）
- ✅ 定員表示（本日/9人、明日/9人）
- ✅ 期間選択処理
- ❌ 日付ヘッダー（L3の責任）

---

### 訪問セクション

- **責任者**: L2_訪問_UI設計.md
- **内容**: 利用者行、訪問セル、時間帯表示
- **CSS変数**: `--label-column-width`, `--date-cell-width`（縦軸整列のため）
- ⚠️ **注意**: カレンダーヘッダーは作らない（L3の責任）

**詳細な責任範囲**:
- ✅ 利用者名列（縦軸ラベル）
- ✅ 訪問セル（時間帯・回数の表示）
- ✅ 訪問リソース表示
- ❌ 日付ヘッダー（L3の責任）

---

### 日別サマリー

- **責任者**: L3_UI_日別サマリー設計.md
- **内容**: 日別のサマリー情報（通い・泊まり・訪問の集計）
- **配置**: カレンダーヘッダーの下、各セクションの上
- **CSS変数**: `--date-cell-width`（縦軸整列のため）

---

## 📚 全ドキュメント一覧（35文書）

### 🗂️ INDEXドキュメント（1文書）

| ファイル名 | 内容 | ステータス |
|-----------|------|-----------|
| **INDEX_ドキュメント構成.md** | 全体構成・ナビゲーション・HUB機能 | ✅ v2.0 |

---

### 📚 第0層：業務知識（6文書）

| ファイル名 | 内容 | ステータス |
|-----------|------|-----------|
| **L0_業務_小規模多機能とは.md** | サービスの概要、制度の背景 | ✅ 作成済み |
| **L0_業務_定員の法的枠組み.md** | 登録定員、通い・泊まり定員 | ✅ 作成済み |
| **L0_業務_居室管理の重要性.md** | 泊まりの居室制約、個室要件 | ✅ 作成済み |
| **L0_業務_調整業務の制約.md** | 実務上の制約、考慮事項 | ✅ 作成済み |
| **L0_業務_新規利用者獲得.md** | 空き状況の活用、営業観点 | ✅ 作成済み |
| **L0_業務_介護ソフトとの関係.md** | CAREKARTE連携、役割分担 | ✅ 作成済み |

---

### 📐 第1層：基礎（7文書）

| ファイル名 | 内容 | ステータス |
|-----------|------|-----------|
| **L1_概要_プロジェクト概要.md** | プロジェクトの目的、スコープ | ✅ 作成済み |
| **L1_制約ゲーム_全体設計.md** | 基準線・充填率、カラーコーディング | ✅ v1.1 |
| **L1_設計・実装の方針.md** | 設計品質の5原則、実装指示書の原則（WHY） | ✅ v2.0 |
| **L1_データ_共通データ構造.md** | 利用者、日付、セクション共通 | ✅ 作成済み |
| **L1_技術_技術仕様.md** | 技術スタック、アーキテクチャ | ✅ 作成済み |
| **L1_技術_アーキテクチャ設計.md** | レイヤー構造、データ共有原則 | ✅ 作成済み |
| **L1_技術_実装制約.md** | 実装時の最低限のルール | ✅ 作成済み |

---

### 🔧 第2層：セクション別（9文書）

**通いセクション（3文書）**:

| ファイル名 | 内容 | ステータス |
|-----------|------|-----------|
| **L2_通い_データ構造.md** | 通いの予定データ、送迎タイプ | ✅ v3.0 |
| **L2_通い_UI設計.md** | グリッド表示、記号（○◓◒） | ✅ v3.0 |
| **L2_通い_ロジック設計.md** | 定員チェック、前半後半判定 | ✅ 作成済み |

**泊まりセクション（3文書）**:

| ファイル名 | 内容 | ステータス |
|-----------|------|-----------|
| **L2_泊まり_データ構造.md** | 居室、入退所、期間管理 | ✅ 作成済み |
| **L2_泊まり_UI設計.md** | 居室軸グリッド、記号（入退） | ✅ v3.0 |
| **L2_泊まり_ロジック設計.md** | 居室割当、期間重複チェック | ✅ 作成済み |

**訪問セクション（3文書）**:

| ファイル名 | 内容 | ステータス |
|-----------|------|-----------|
| **L2_訪問_データ構造.md** | 時間帯、回数データ | ✅ 作成済み |
| **L2_訪問_UI設計.md** | 回数表示、時間帯別表示 | ✅ v3.0 |
| **L2_訪問_ロジック設計.md** | 回数カウント、時間帯判定 | ✅ 作成済み |

---

### 🔗 第3層：統合（5文書）

| ファイル名 | 内容 | ステータス |
|-----------|------|-----------|
| **L3_UI_統合UI設計.md** | カレンダーヘッダー、タブナビゲーション | ✅ v3.0 |
| **U3_UI_日別サマリー.md** | 日別サマリー仕様 | ✅ v2.0 |
| **L3_入出力_CSV仕様書.md** | CSVインポート・エクスポート | ✅ 作成済み |
| **L3_入出力_Excel仕様.md** | Excel連携仕様 | ✅ 作成済み |
| **L3_調整_調整支援機能.md** | 空き状況表示、推奨案提示 | ✅ 作成済み |

---

### 📋 ガイド・テンプレート（7文書）

| ファイル名 | 用途 | ステータス |
|-----------|------|-----------|
| **TEMPLATE_L1_概要.md** | L1層のドキュメント作成時 | ✅ 作成済み |
| **TEMPLATE_L2_データ構造.md** | L2層のデータ構造作成時 | ✅ 作成済み |
| **CHECKLIST_設計レビュー.md** | 設計書のレビュー時 | ✅ v2.0 |
| **GUIDE_実装指示書作成.md** | 実装指示書作成時（具体的手順・HOW） | ✅ v2.0 |
| **GUIDE_LLM誤解予測レビュー.md** | 実装指示書作成前 | ✅ v1.0 |
| **GUIDE_引継ぎドキュメント作成ルール.md** | チャット切り替え時 | ✅ v1.0 |
| **GUIDE_ドキュメント作成・更新フロー.md** | ドキュメント作成時 | ✅ v1.0 |

---

## 💻 実装担当（GitHub Copilot）の方へ

### あなたの役割

- 設計書・実装指示書に基づいて実装する
- コードを書き、テストを実行する
- 問題が発生したら設計担当に報告する

### 環境の特徴（GitHub Copilot用）

- **ドキュメントの場所**: プロジェクトルートの `docs/` フォルダ
- **コードの場所**: `src/` フォルダ（階層構造あり）
- **フォルダ構造**: VSCodeで見える
- **重要**: 設計書を直接参照できます（例: `docs/L2/L2_通い_UI設計.md`）

### 最初に読むべきドキュメント（必読・順序厳守）

実装を開始する前に、**必ず**実装指示書を読んでください。

実装指示書には：
- 何を実装するか
- ⚠️ 警告セクション（最重要）
- ✅ やること / ❌ やらないこと
- 設計書への参照
- 完成の定義

が記載されています。

**実装指示書の警告セクションを最初に読んでください。**

---

## 🎓 プロジェクトBの設計原則（共通）

設計担当・実装担当の両方が理解すべき原則です。

### 設計品質の5原則（前プロジェクトの教訓）

1. **曖昧さは実装時ではなく、設計時に排除する**
2. **データ型を明示する**（文字列かDateか？）
3. **インタラクションを詳細に記述する**（クリックしたらどうなる？）
4. **状態遷移を図示する**（どの状態からどの状態に遷移する？）
5. **テスト仕様書を先に書く**（何をテストすれば完成？）

詳細は `CHECKLIST_設計レビュー.md` を参照。

---

### 実装品質の原則（このプロジェクトで確立）

6. **LLM誤解予測レビューを実施する**（実装指示書作成前）
   - LLM実装者の「効率化の誘惑」を予測
   - 誤実装パターンを先回りして警告
   - 「やること」「やらないこと」「なぜか」を明記

詳細は `GUIDE_LLM誤解予測レビュー.md` を参照。

---

### 引継ぎの原則（このプロジェクトで確立）

7. **チャット切り替え時は引継ぎドキュメントを作成する**
   - 必ず読むべきドキュメント（読む順序）を明記
   - 読む理由を説明
   - 読まなくていいドキュメントも明示

詳細は `GUIDE_引継ぎドキュメント作成ルール.md` を参照。

---

### プロジェクトBの業務原則

1. **月別予定表の実務が唯一の基準** - CSV/Excelは入出力手段
2. **各セクションは独立** - 通い・泊まり・訪問は独立設計
3. **日付軸思考** - 「この日は誰？」に答える設計
4. **居室管理重視** - 泊まりセクションは居室が主役
5. **拡張性** - セクション追加・統合を前提
6. **CAREKARTEとの補完関係** - 予定調整と記録・請求の役割分担

---

## 📊 ドキュメント作成の進捗管理

### ✅ 作成済み（35文書）

**第0層（業務知識）**: 6文書 - 完了  
**第1層（基礎）**: 7文書 - 完了  
**第2層（セクション別）**: 9文書 - 完了  
**第3層（統合）**: 5文書 - 完了  
**ガイド・テンプレート**: 7文書 - 完了

**すべてのドキュメントが作成済みです！** 🎉

---

## 🎯 判断に迷ったら

1. **月別予定表の実務を確認** - 実務が唯一の基準
2. **L0層の業務知識を確認** - 法令上の制約を確認
3. **このINDEXでナビゲート** - タスク別ガイド、依存関係、責任分界を確認
4. **設計担当に質問**（実装担当の場合）/ **ユーザーに質問**（設計担当の場合）

---

## 📅 更新履歴

| 日付 | バージョン | 変更内容 | 担当 |
|------|----------|---------|------|
| 2025-11-21 | 1.0 | 初版作成 | Claude |
| 2025-12-13 | 1.6 | L1_制約ゲーム追加 | Claude |
| 2025-12-17 | 2.0 | HUB機能追加（タスク別ナビゲーション、依存関係、責任分界マップ） | Claude |
| 2025-12-17 | 2.1 | 文書数修正（35文書）、L3層5文書・templates7文書に修正、すべて作成済み | Claude |

---

**最終更新**: 2025年12月17日  
**次回更新予定**: 新しい原則が確立された時、または重大な問題が発見された時

---

**このINDEXは、プロジェクトBのドキュメントHUBです。タスクに応じて適切なドキュメントにナビゲートします。**